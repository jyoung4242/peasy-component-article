var F=Object.defineProperty;var R=(f,e,t)=>e in f?F(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t;var N=(f,e,t)=>R(f,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();class A{constructor(){this.state="created",this.host=null,this.bindings=[],this.views=[],this.animations=[],this.animationQueue=[],this.destroyed="",this.moved=""}static create(e,t={},i,n={parent:null,prepare:!0,sibling:null}){const s=new A;if(s.model=t,s.element=i??e,s.parent=n.parent??u,s.host=n.host??s.parent.host,s.sibling=n.sibling??null,i instanceof HTMLTemplateElement||(i==null?void 0:i.tagName)==="TEMPLATE"){const r=i.content.cloneNode(!0);if(r.children.length===1)return u.create(e,t,r.firstElementChild,n);s.views=[...r.children].map(o=>u.create(e,t,o,{...n,parent:s})),s.state="rendered"}else s.bindings.push(...u.parse(s.element,t,s,n.parent));return s.parentElement=i!=null?e:e.ownerDocument.documentElement,s.views.length>1?(s.attached=Promise.all(s.views.map(r=>r.attached)),s.detached=Promise.all(s.views.map(r=>r.detached))):(s.attached=new Promise(r=>{s.t=r}),s.detached=new Promise(r=>{s.i=r})),s}get lastElement(){var i,n;if(this.render==null&&(this.render=!(((n=(i=this.element).hasAttribute)==null?void 0:n.call(i,"PUI-UNRENDERED"))??!1)),this.render)return this.element;const t=this.bindings.flatMap(s=>s.views).slice(-1)[0];return t==null?void 0:t.lastElement}destroy(){var e;this.views.forEach(t=>t.destroy()),(e=this.element.classList)==null||e.add("pui-removing"),this.destroyed="queue",u.destroyed.push(this)}terminate(){Promise.all(this.getAnimations()).then(()=>{var i;const e=this.element.parentElement;e==null||e.removeChild(this.element),(i=this.i)==null||i.call(this),this.dispatchEvent(e,"removed"),this.bindings.forEach(n=>n.unbind());const t=this.parent.views.findIndex(n=>n===this);t>-1&&this.parent.views.splice(t,1)}),this.destroyed="destroyed"}move(e){var t;this.moved="queue",(t=this.element.classList)==null||t.add("pui-moving"),this.sibling=e}play(e,t){return typeof e=="string"&&(e=this.animations.find(i=>i.name===e).clone()),e.element=t,e.state="pending",this.animationQueue.push(e),this.updateAnimations(performance.now()),e}updateFromUI(){this.views.forEach(e=>e.updateFromUI()),this.bindings.forEach(e=>e.updateFromUI())}updateToUI(){var t,i,n,s,r;const e=this.state==="created";switch(e||(this.views.forEach(o=>o.updateToUI()),this.bindings.forEach(o=>o.updateToUI())),this.state){case"created":if((t=this.element.classList)==null||t.add("pui-adding"),this.render=!(((n=(i=this.element).hasAttribute)==null?void 0:n.call(i,"PUI-UNRENDERED"))??!1),this.render){const o=(s=this.parent)==null?void 0:s.parent;let l=((o==null?void 0:o.render)??!1?this.sibling:o==null?void 0:o.sibling)??null;l=(l instanceof A?l.lastElement:l)??null;const h=this.parentElement??u.parentElement(this.element,this.parent);h.insertBefore(this.element,(l==null?void 0:l.nextSibling)??null),this.dispatchEvent(h,"added")}this.t(),this.state="attaching";break;case"attaching":this.getAnimations(!1).length===0&&((r=this.element.classList)==null||r.remove("pui-adding"),this.state="attached");break;case"attached":this.state="rendered";break}e&&(this.views.forEach(o=>o.updateToUI()),this.bindings.forEach(o=>o.updateToUI()))}updateAtEvents(){this.views.forEach(e=>e.updateAtEvents()),this.bindings.forEach(e=>e.updateAtEvents())}updateAnimations(e){var t;for(;((t=this.animationQueue[0])==null?void 0:t.state)==="finished";)this.animationQueue.shift().destroy();for(let i=0;i<this.animationQueue.length;i++){const n=this.animationQueue[i];n.state==="pending"&&(n.isBlocked(e)||(n.state="playing",n.startTime=e,n.animation=n.element.animate(n.keyframes,n.options),n.finished=n.animation.finished,n.finished.then(()=>{n.state="finished",this.updateAnimations(performance.now())})))}}updateMove(){var e;switch(this.moved){case"queue":this.moved="move";break;case"move":if(this.getAnimations().length===0){const t=this.parentElement??u.parentElement(this.element,this.parent);let i=(this.sibling instanceof A?this.sibling.lastElement:this.sibling)??null;if(this.render)t.insertBefore(this.element,(i==null?void 0:i.nextSibling)??null);else{const n=this.bindings.flatMap(s=>s.views);for(const s of n)t.insertBefore(s.element,(i==null?void 0:i.nextSibling)??null),i=s.element}(e=this.element.classList)==null||e.remove("pui-moving"),this.moved="",this.sibling=null}break}this.bindings.forEach(t=>t.updateMove()),this.views.forEach(t=>t.updateMove())}getAnimations(e=!0){var t,i;return(((i=(t=this.element).getAnimations)==null?void 0:i.call(t,{subtree:e}))??[]).filter(n=>{var s;return n.playState!=="finished"&&((s=n.effect)==null?void 0:s.getTiming().iterations)!==1/0}).map(n=>n.finished)}dispatchEvent(e,t){if(e!=null){const i=new CustomEvent(`pui-${t}`,{detail:{model:this.model.$model??this.model,context:this.model,element:this.element,view:this},bubbles:!0,cancelable:!0});e.dispatchEvent(i)}}}class z{constructor(){this.fromUI=!1,this.toUI=!0,this.atEvent=!1,this.oneTime=!1,this.views=[],this.firstUpdate=!0,this.events=[],this.triggerAtEvent=e=>{e.type==="change"?this.events.push(e):u.resolveValue(this.object,this.property).call(this.object.$model,e,this.object.$model,this.element,this.attribute,this.object)},this.twoWayBindingEvent=e=>{const{target:t,property:i}=u.resolveProperty(this.object,this.property),n=e.detail;if(n!==this.lastUIValue){let s=n;s!==void 0&&s!==this.lastValue&&u.resolveValue(this.object,this.property)==="number"&&!isNaN(s)&&(s=+s),t[i]=s}},this.id=++u.id}get element(){return this.$element==null&&(this.$element=typeof this.selector=="string"?this.context.querySelector(this.selector):this.selector),this.$element}set element(e){this.$element=e}static create(e){var o,p,l;const t=new z,i=((o=e.property)==null?void 0:o.split(":"))??[],n=i.shift(),s=typeof e.attribute!="boolean"?(e.attribute??"innerText").split(":"):[],r=typeof e.attribute!="boolean"?s.shift():e.attribute;if(t.parent=e.parent??u,t.object="$model"in e.object?e.object:{$model:e.object},t.object.$parent==null){const h=(l=(p=t.parent.parent)==null?void 0:p.object)==null?void 0:l.$parent;h!=null&&(t.object.$parent=h)}return t.property=n,t.propertyArguments=i,t.context=e.context??document,t.selector=e.selector,t.attribute=r,t.attributeArguments=s,t.value=e.value??t.value,t.template=e.template??t.template,t.fromUI=e.fromUI??t.fromUI,t.toUI=e.toUI??t.toUI,t.atEvent=e.atEvent??t.atEvent,t.oneTime=e.oneTime??t.oneTime,t.addListener(),typeof t.fromUI!="boolean"&&(t.fromUI=t.fromUI.bind(t)),typeof t.toUI!="boolean"&&(t.toUI=t.toUI.bind(t)),t}destroy(){this.element=null,this.removeListener(),this.views.forEach(e=>e.destroy())}unbind(){u.unbind(this)}addListener(){this.atEvent&&(this.toUI=!1,this.fromUI=!1,this.element.addEventListener(this.attribute,this.triggerAtEvent)),this.toUI&&this.fromUI&&customElements.get(this.element.tagName.toLowerCase())!=null&&this.element.addEventListener(this.attribute,this.twoWayBindingEvent)}removeListener(){this.atEvent&&this.element.removeEventListener(this.attribute,this.triggerAtEvent),this.toUI&&this.fromUI&&customElements.get(this.element.tagName.toLowerCase())!=null&&this.element.removeEventListener(this.attribute,this.twoWayBindingEvent)}updateFromUI(){var n;if(this.fromUI===!1||this.firstUpdate){this.firstUpdate=!1,this.views.forEach(s=>s.updateFromUI());return}const{target:e,property:t}=u.resolveProperty(this.element,this.attribute),i=e[t];if(i!==this.lastUIValue){let s=this.fromUI!==!0?this.fromUI(i,this.lastUIValue,this.property,this.object):i;if(this.lastUIValue=i,s!==void 0&&s!==this.lastValue){this.lastValue=s;const{target:r,property:o}=u.resolveProperty(this.object,this.property);u.resolveValue(this.object,this.property)==="number"&&!isNaN(s)&&(s=+s),r[o]=s}else this.lastValue=s;(n=this.parent.host)==null||n.dispatchEvent(new CustomEvent(t,{detail:s}))}this.views.forEach(s=>s.updateFromUI())}updateToUI(){if(this.toUI===!1){this.views.forEach(t=>t.updateToUI());return}let e=u.resolveValue(this.object,this.property);if(this.template!=null)if(this.template instanceof HTMLElement)if(typeof this.attribute=="boolean"){if(e=(e??!1)!==!1,e!==this.lastValue){const t=this.toUI!==!0?this.toUI(e,this.lastValue,this.property,this.object,this.value):e;if(t!==void 0&&t!==this.lastUIValue){if(t===this.attribute)this.views.push(A.create(this.element.parentElement,this.object,this.template.cloneNode(!0),{parent:this,prepare:!1,sibling:this.element}));else{const i=this.views.pop();i==null||i.destroy()}this.lastValue=e,this.lastUIValue=t}}}else{let t=!1,i=!1;e==null&&(e=[]);const n=this.propertyArguments[0],s=this.lastValue??[];if(e.length!==s.length)t=!0;else for(let a=0,I=e.length;a<I;a++){let v,m;n==null?e[a]!==s[a]&&(t=!0,i=!0):(v=u.resolveValue(e[a]??{},n),m=u.resolveValue(s[a]??{},n),v!==m&&(t=!0),e[a]!==s[a]&&(i=!0))}if(!t)if(i){const a=this.toUI!==!0?this.toUI(e,s,this.property,this.object,this.value):e;return this.updateViews(e,a)}else return this.updateViews();const r=this.toUI!==!0?this.toUI(e,s,this.property,this.object,this.value):e;if(r==null)return this.updateViews();const o=this.lastUIValue??[];let p=0;for(let a=0,I=r.length,v=0;a<I;a++,v++){let m,c;if(n==null?(m=r[a],c=o[v]):(m=u.resolveValue(r[a]??{},n),c=u.resolveValue(o[v]??{},n)),m===c)p++;else break}if(p===r.length&&r.length===o.length)return this.updateViews(e,r);const l=this.views.splice(0,p);let h=l[l.length-1];for(let a=p,I=r.length,v=p;a<I;a++,v++){const m=r[a],c=this.views.shift();if(c==null){const b={$model:{[this.attribute]:m},$parent:this.object},U=A.create(this.element.parentElement,b,this.template.cloneNode(!0),{parent:this,prepare:!1,sibling:h??this.element});l.push(U),h=U;continue}const y=n==null?m:u.resolveValue(m??{},n),d=c==null?void 0:c.model.$model[this.attribute],g=n==null?d:u.resolveValue(d??{},n);if(y===g){l.push(c),c.move(h??this.element),h=c;continue}if(!r.slice(a).map(b=>n==null?b:u.resolveValue(b??{},n)).includes(g)){c.destroy(),a--,h=c;continue}this.views.unshift(c);let x=!1;for(let b=0,U=this.views.length;b<U;b++){const C=this.views[b],$=C==null?void 0:C.model.$model[this.attribute],V=n==null?$:u.resolveValue($??{},n);if(y===V){l.push(...this.views.splice(b,1)),C.move(h??this.element),x=!0,h=C;break}}if(!x){const b={$model:{[this.attribute]:m},$parent:this.object},U=A.create(this.element.parentElement,b,this.template.cloneNode(!0),{parent:this,prepare:!1,sibling:h??this.element});l.push(U),h=U}}return this.views.forEach(a=>a.destroy()),this.views=l,this.updateViews(e,r)}else{const t=u.resolveValue(this.object,this.attribute);if((e??t)==null||(e??t)!==this.lastValue){this.lastUIValue!=null&&(this.lastUIValue.destroy(),this.lastUIValue=null);const i=e==null?t:t.create(e),n=t.template;this.lastValue=e??t;const s=this.element.nodeType===8?this.element.parentElement:this.element,r=this.element.nodeType===8?this.element:null;if(this.lastUIValue=u.create(s,i,n,{parent:this,prepare:!0,sibling:r}),this.attributeArguments[0]!=null&&e!=null){const{target:o,property:p}=u.resolveProperty(this.object,this.attributeArguments[0]);o[p]=this.lastUIValue}this.views.push(this.lastUIValue)}}else if(e!==this.lastValue){const t=this.toUI!==!0?this.toUI(e,this.lastValue,this.property,this.object,this.value):e;if(t!==void 0&&t!==this.lastUIValue){const{target:i,property:n}=u.resolveProperty(this.element,this.attribute);i[n]=t,"setAttribute"in this.element&&this.element.setAttribute(this.attribute,t),this.lastValue=e,this.lastUIValue=t}}this.updateViews()}updateAtEvents(){let e=this.events.shift();for(;e!=null;)u.resolveValue(this.object,this.property).call(this.object.$model,e,this.object.$model,this.element,this.attribute,this.object),e=this.events.shift();this.views.forEach(t=>t.updateAtEvents())}updateMove(){this.views.forEach(e=>e.updateMove())}updateViews(e,t){e==null?this.views.forEach(i=>i.updateToUI()):(this.views.forEach((i,n)=>{const s=t[n];typeof s=="object"&&(s.$index=n),i.model.$model[this.attribute]=s,i.model.$index=n,i.updateToUI()}),this.lastValue=[...e],this.lastUIValue=[...t]),this.oneTime&&(this.toUI=!1,this.fromUI=!1)}}var k;class w{static initialize(e=!0){if(!this.initialized&&(this.initialized=!0,this.initializeLoadPromise(),e!==!1)){if(e===!0){const t=()=>{this.update(),requestAnimationFrame(t)};requestAnimationFrame(t);return}setInterval(()=>this.update(),1e3/e)}}static import(e){this.initializeLoadPromise(),document.body.insertAdjacentHTML("afterbegin",`<object type="text/pui" data="${e}"></object>`)}static ready(){return this.initialize(),this.loadPromise.then(()=>(this.hoist()&&document.head.insertAdjacentHTML("beforeend",'<style> object[type="text/pui"] { height: 0; position: absolute; } </style>'),this.registrations))}static create(e=document.body,t={},i=null,n={parent:null,prepare:!0,sibling:null}){var r;if(typeof e=="string"&&(e=document.querySelector(e)),(typeof t=="string"||t instanceof HTMLElement)&&(console.warn("Old parameter order to UI.create!"),[t,i]=[i,t]),typeof i=="string"){const o=((r=e==null?void 0:e.ownerDocument)==null?void 0:r.defaultView)!=null?e.ownerDocument:document;if(i.startsWith("#"))i=o.querySelector(i).cloneNode(!0);else{const p=o.createElement("template");p.innerHTML=n.prepare?this.prepare(i):i,i=p}}const s=A.create(e,t,i,n);return s.parent===u&&this.views.push(s),this.initialize(),s}static play(e,t){return typeof e=="string"?(e=this.globals.animations.find(i=>i.name===e).clone(),e.play(t)):e.play()}static queue(e){this.h.push(e),this.initialize()}static register(e,t){if(typeof e=="string"){this.registrations[e]=t;return}this.registerWebComponent(t,e)}static parse(e,t,i,n){const s=[];if(e instanceof Comment)return[];if(e instanceof HTMLTemplateElement||e.tagName==="TEMPLATE")return[];if(e.nodeType===3){let r=e.textContent,o=r.match(this.regexValue);for(;o!=null;){const p=o[1];let l=o[2];r=o[3];let h=!1;l.startsWith("|")&&(h=!0,l=l.slice(1).trimStart());const a=l.match(this.regexConditionalValue);let I,v=!0;if(l.startsWith("(")){const c=`_pui${this.bindingCounter++}`;Object.defineProperty(t,c,{get:new Function(`return ${l}`)}),l=c}else a&&(l=a[3],I=`${a[2]}${a[1]}`,v=function(c,y,d,g,x){const b=x[0]==="=";return x=x.slice(2,-1),!!c===b?x:""});let m=e.cloneNode();e.textContent=p,this.parentElement(e,n).insertBefore(m,e.nextSibling),s.push(this.bind({selector:m,attribute:"textContent",object:t,property:l,parent:i,oneTime:h,value:I,toUI:v})),e=m,m=e.cloneNode(),m.textContent=r,this.parentElement(e,n).insertBefore(m,e.nextSibling),e=m,o=r.match(this.regexValue)}}else{const r=e.getAttribute("pui")??"";if(r.trim().length>0){const o=r.split(";");for(let p of o)p=p.trim(),p.length>0&&e.setAttribute(`pui.${this.bindingCounter++}`,p)}if(e.removeAttribute("pui"),s.push(...Object.keys(e.attributes??[]).reverse().map(o=>{var v;const p=[];if(e instanceof Comment)return[];const l=e.attributes[o];if(l.name.startsWith("pui.")){const m=l.value.match(this.regexAttribute);let[c,y,d,g,x]=m,b,U,C=!1;if(d!=="@"){const $=y.match(/^'(.*?)'$/);if($!=null)b=$[1],e.setAttribute("value",b),y=e.nodeName.toLowerCase()==="option"?"selected":"checked",g=V=>V?b:void 0,d=V=>V===b;else if(y==="")if(g===">"){const[V,j]=x.split(":");if(V.length>0){const{target:E,property:T}=this.resolveProperty(t,V);E[T]=e}return(j??"").length>0&&u.queue(()=>{const{target:E,property:T}=this.resolveProperty(t,j);E[T]=i}),[]}else({element:e,template:U}=this.replaceWithComment(e,i,n,l.name)),y=d==="=",d=!0,g==="|"&&(C=!0);else if(g==="="&&d==="="){if(!e.tagName.includes("-")){e.setAttribute("pui-unrendered","");const V=this.parentNode(e,n);V.nodeType!==8?{element:e,template:U}=this.replaceWithComment(e,i,n,l.name,U):e=V}U=y,d=!0}else g==="*"?{element:e,template:U}=this.replaceWithComment(e,i,n,l.name):g==="|"?C=!0:y!=="checked"&&e.setAttribute(y,((v=e.getAttribute)==null?void 0:v.call(e,y))??"")}return[this.bind({selector:e,attribute:y,value:b,object:t,property:x,template:U,toUI:typeof d=="string"?d==="<":d,fromUI:typeof g=="string"?g===">":g,atEvent:d==="@",parent:i,oneTime:C})]}const h=[l.value];let a=0,I=h[a].match(this.regexValue);for(;I!=null;){let{before:m,property:c,after:y}=I.groups,d=!1;c.startsWith("|")&&(d=!0,c=c.slice(1).trimStart());const g=c.match(this.regexConditionalValue);let x;g&&(c=g[3],x=`${g[2]}${g[1]}`),p.push(this.bind({selector:e,attribute:l.name,object:t,property:c,oneTime:d,toUI(b,U,C,$,V){if(this.oneTime){const E=h.indexOf(C);E>-1&&(h[E]=u.resolveValue($,C),h[E-1]+=h[E]+h[E+1],h.splice(E,2))}const j=h.map((E,T)=>{if(T%2===0)return E;const P=E.match(u.regexSplitConditionalValue);if(P){const B=E===`${C}${V}`?b:u.resolveValue($,P[1]),O=P[2]==="=";return!!B===O?P[3].slice(1,-1):""}return E===C?b:u.resolveValue($,E)}).join("");return e.setAttribute(l.name,j),j},parent:i,value:x})),h[a++]=m,h[a++]=`${c}${x??""}`,h[a]=y,I=h[a].match(this.regexValue)}return p}).flat()),e instanceof Comment)return s.filter(o=>o.template!=null?!0:(o.unbind(),!1));if(!this.leaveAttributes)for(let o=Object.keys(e.attributes??[]).length-1;o>=0;o--){const p=e.attributes[Object.keys(e.attributes??[])[o]];p.name.startsWith("pui.")&&e.removeAttribute(p.name)}s.push(...Array.from(e.childNodes).map(o=>this.parse(o,t,i,n)).flat())}return s}static bind(e){return z.create(e)}static unbind(e){if(e.destroy(),e.parent!==u){const t=e.parent.bindings,i=t.indexOf(e);i>-1&&t.splice(i,1)}}static update(){this.u.forEach(t=>t()),this.u=this.h,this.h=[],this.views.forEach(t=>t.updateToUI()),this.views.forEach(t=>t.updateFromUI()),this.views.forEach(t=>t.updateAtEvents());const e=performance.now();[...this.views,this.globals].forEach(t=>t.updateAnimations(e)),this.views.forEach(t=>{t.updateMove()});for(let t=0;t<this.destroyed.length;t++){const i=this.destroyed[t];switch(i.destroyed){case"queue":i.state==="rendered"?i.destroyed="destroy":i.updateToUI();break;case"destroy":{i.terminate();const n=this.destroyed.findIndex(s=>i===s);n>-1&&(this.destroyed.splice(n,1),t--)}}}}static resolveProperty(e,t){t=t.replace("[",".").replace("]",".");const i=t.split(".").filter(s=>(s??"").length>0);for(;i[0]==="$parent"&&e.$parent!=null;)e=e.$parent,i.shift();let n=e;if(i[0]==="$index"&&this.objectHas(n,"$index"))return{target:n,property:i[0]};for(this.objectHas(n,"$model")&&(n=e.$model);i.length>1;)n=n[i.shift()];return{target:n,property:i[0]}}static resolveValue(e,t){let i=0;do{const{target:n,property:s}=this.resolveProperty(e,t);if(n!=null&&this.objectHas(n,s))return n[s];e=e.$parent}while(e!=null&&i++<1e3);if(t in this.registrations)return this.registrations[t]}static initializeLoadPromise(){var e;this.loadPromise==null&&(this.loadPromise=new Promise(t=>this.loadResolve=t),(e=document.defaultView)==null||e.addEventListener("load",this.loaded))}static hoist(e=document,t=document){e!==t&&((t.querySelectorAll("style")??[]).forEach(s=>{e.head.appendChild(s.cloneNode(!0))}),(t.querySelectorAll("template")??[]).forEach(s=>{e.head.appendChild(s.cloneNode(!0))}));const i=t.querySelectorAll('object[type="text/pui"]')??[];let n=i.length>0;return i.forEach(s=>{n=this.hoist(e,s.contentDocument)||n}),n}static objectHas(e,t){try{return t in e}catch{return!1}}static replaceWithComment(e,t,i,n,s){const r=document.createComment(n);return this.parentNode(e,i).insertBefore(r,e),this.parentNode(e,i).removeChild(e),e.removeAttribute(n),s=s??e,e=r,e.parentNode instanceof DocumentFragment&&(t.element=e),{element:e,template:s}}static parentElement(e,t){const i=e.parentElement;if(i!=null)return i;for(;t!=null&&(t.element==null||t.element===e);)t=t.parent;return t==null?void 0:t.element}static parentNode(e,t){const i=e.parentNode;if(i!=null)return i;for(;t!=null&&(t.element==null||t.element===e);)t=t.parent;return t==null?void 0:t.element}static prepare(e){let t=e;e="";let i=t.match(this.regexReplace);for(;i!=null;){const[n,s,r,o]=i;r.match(/\S\s*===/)?e+=`${s.trimEnd()}br PUI.${this.bindingCounter++}="${r}"`:e+=`${s} PUI.${this.bindingCounter++}="${r}" `,t=o,i=t.match(this.regexReplace)}return e+=t,e}static parseAttribute(e,t,i,n,s,r){const o=r.match(this.regexAttribute);let[p,l,h,a,I]=o,v,m,c=!1;if(h!=="@"){const y=l.match(/^'(.*?)'$/);if(y!=null)v=y[1],e.setAttribute("value",v),l=e.nodeName.toLowerCase()==="option"?"selected":"checked",a=d=>d?v:void 0,h=d=>d===v;else if(l==="")if(a===">"){const{target:d,property:g}=this.resolveProperty(t,I);return d[g]=e,[]}else({element:e,template:m}=this.replaceWithComment(e,i,n,s)),l=h==="=",h=!0,a==="|"&&(c=!0);else if(a==="="&&h==="="){const d=this.parentNode(e,n);d.nodeType!==8?{element:e,template:m}=this.replaceWithComment(e,i,n,s,m):e=d,m=l,c=!0,h=!0}else a==="*"?{element:e,template:m}=this.replaceWithComment(e,i,n,s):a==="|"?c=!0:l!=="checked"&&e.setAttribute(l,"")}return[this.bind({selector:e,attribute:l,value:v,object:t,property:I,template:m,toUI:typeof h=="string"?h==="<":h,fromUI:typeof a=="string"?a===">":a,atEvent:h==="@",parent:i,oneTime:c})]}static registerWebComponent(e,t){e??(e=t.webComponent);class i extends HTMLElement{constructor(){super(),this.webComponentComponent=t,this.webComponentUIView=null,this.attachShadow({mode:"open"})}connectedCallback(){this.initialize()}disconnectedCallback(){this.terminate()}attributeChangedCallback(r,o,p){this.initialize(),this.webComponentUIView.model[r]=p}initialize(){var r;if(this.webComponentUIView==null){const o="create"in this.webComponentComponent?this.webComponentComponent.create():new this.webComponentComponent;o.webComponentHost=this,this.webComponentUIView=u.create(this.shadowRoot,o,this.webComponentComponent.template,{host:(r=this.shadowRoot)==null?void 0:r.host})}}terminate(){this.webComponentUIView!=null&&this.webComponentUIView.destroy()}}i.observedAttributes=t.observedAttributes??[],i.observedProperties=t.observedProperties??i.observedAttributes;const n=[...new Set([...i.observedAttributes,...i.observedProperties])];for(const s of n)Object.defineProperty(i.prototype,s,{configurable:!0,enumerable:!1,get(){return this.webComponentUIView.model[s]},set(r){i.observedAttributes.includes(s)?this.setAttribute(s,r):(this.initialize(),this.webComponentUIView.model[s]=r)}});return customElements.define(e,i),i}}k=w;w.initialized=!1;w.id=0;w.views=[];w.destroyed=[];w.globals=new A;w.registrations={};w.leaveAttributes=!1;w.regexReplace=/([\S\s]*?)\\?\$\{([^}]*?[<=@!]=[*=>|][^}]*?)\}([\S\s]*)/m;w.regexAttribute=/^\s*(\S*?)\s*([<=@!])=([*=>|])\s*(\S*?)\s*$/;w.regexValue=/(?<before>[\S\s]*?)\\?\$\{\s*(?<property>[\s\S]*?)\s*\}(?<after>[\S\s]*)/m;w.regexConditionalValue=/^\s*(.+?)\s*([=!])\s*(\S+)/;w.regexSplitConditionalValue=/^(.+?)([=!])(.*)/;w.bindingCounter=0;w.u=[];w.h=[];w.loaded=()=>{var f;k.loadResolve(),(f=document.defaultView)==null||f.removeEventListener("load",k.loaded)};function D(){let f=window,e=window;for(;;)try{if(f.parent===f){e=f;break}else f.parent.UI!=="guarantee-condition-always-true"&&(f=f.parent)}catch{break}return e}const W=D();"UI"in W||(W.UI=w);const u=W.UI,L=class L{constructor(e,t,i){this.buttonText=e,this.className=t,this.buttonClickHandler=i}static create(e){return new L(e.buttonText,e.className,e.buttonClickHandler)}};N(L,"template",`
    <style>
      .button_Component {
          font-size: 1em;
          border-radius: 10px;
          border: 0px;
          width: 60px;
          height: 25px;
          margin: 5px;
          font-weight: bold;
          color: #111111;
          background-color: whitesmoke;
      }

      .button_Component:active {
        -webkit-box-shadow: inset 0px 0px 5px #c1c1c1;
        -moz-box-shadow: inset 0px 0px 5px #c1c1c1;
        box-shadow: inset 0px 0px 5px #c1c1c1;
        outline: none;
      }

      .up {
        color: whitesmoke;
        background-color: green;
      }

      .down {
        color: whitesmoke;
        background-color: red;
      }
      
    </style>
    <button class="button_Component \${className}"  \${click@=>buttonClickHandler}">\${buttonText}</button>
  `);let M=L;const S=class S{constructor(e,t){N(this,"increment",()=>{this.count++});N(this,"decrement",()=>{this.count>0&&this.count--});this.count=e,this.className=t}static create(e){return new S(e.count,e.className)}};N(S,"template",`
    <style>
      .label_Component {
          font-size: 3em;
          color: whitesmoke;
      }
    </style>
    <div class="label_Component \${className}">\${count}</div>
  `);let H=S;const q={Label:H,Button:M,labelInstance:void 0,counterState:{count:0,className:""},upButtonState:{buttonText:"Up",className:"up",buttonClickHandler:()=>{_()}},downButtonState:{buttonText:"Down",className:"down",buttonClickHandler:()=>{K()}}},Q=`
<div>
    <style>
        .container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 100px;
            padding: 10px;
            border: 2px solid whitesmoke;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .button_container {
            gap: 5px;
            display: flex;
            flex-direction: row;
        }
    </style>

    <div class="container">

        <div class="label_container">
          <!-- Using the Peasy-UI Component here for a Label-->
          <\${Label:labelInstance === counterState}>
        </div>
       
        <div class="button_container">
          <!-- Creating two instances of the Peasy-UI Components here for buttons-->
          <\${Button === upButtonState}>
          <\${Button === downButtonState}>
        </div>
    
    </div>
</div>`;function _(){var f;(f=q.labelInstance)==null||f.model.increment()}function K(){var f;(f=q.labelInstance)==null||f.model.decrement()}await u.create(document.body,q,Q).attached;
